# Описание

Реагирует на переключение переключение стика джойстика. 

## Принцип работы

На вход поступает ШИМ сигнал с RC приемника. Для разных положений стика будет разная скважность. Измеряя ее продолжительность, можно определить положение стика и подовать сигнал на выход МК.

# Железо

Так как мой вариант нужен был для включения сведиодной подсветки то не использую внешние питание и мощный транзистор. Так же мне нужно было только одно положение.

# Прошивка

Для компиляции используется SDCC. Так же нужна STM8S_SPL от ST - библиотека для работы с переферией.

## Как прошить

Для прошивки использую stm8flash.

Первым делом нужно настроить Option bytes под железо. Для захвата используется 1й канал 1го таймера (Channel 1 TIM1).

```bash
echo -ne '\x00\x00\xff\x01\xfe\x00\xff\x00\xff\x00\xff' > opt.bin
stm8flash -c stlinkv2 -p stm8s103f3 -s opt -w opt.bin
```

Данная строчка активирует альтернативные функции нужной нам ножки: Port C5 alternate function = TIM2_CH1; port C6 alternate function =TIM1_CH1; port C7 alternate function = TIM1_CH2.

Затем уже прошиваем саму прошивку (firmware.bin). Тут уже можно использовать: make upload, или загрузку вручную stm8flash.

```bash
./stm8flash -c stlinkv2 -p stm8s003f3 -w firmware.ihx
```
